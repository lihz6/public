{"version":3,"sources":["serviceWorker.ts","_fetch/index.ts","_fetch/_fetch.ts","_base/Context/index.tsx","_base/Context/fetch.ts","x000/Init/index.tsx","x000/Sign/index.tsx","x000/Sign/fetch.ts","_base/withPath.tsx","x000/Head/index.tsx","_util/_grid.ts","_util/_allocsize.ts","_util/_strftime.ts","_util/_divmod.ts","_util/_tree.ts","_type/struct.ts","_view/DrawBase/index.tsx","_view/DrawScale/index.tsx","_view/DrawNode/index.tsx","_view/DrawGridSub/index.tsx","_view/DrawGrid/index.tsx","_view/DrawGridBox/useDrawGrid.ts","_view/DrawGridBox/useBorder.ts","_view/DrawGridBox/index.tsx","_view/DrawGridBox/borderData.ts","_view/DrawMenu/useDuplicate.ts","_view/DrawMenu/useClear.ts","_view/DrawMenu/index.tsx","_view/DrawMenu/useDelete.ts","_view/DrawSize/index.tsx","x000/Draw/useMnode.ts","x000/Draw/useScale.ts","x000/Draw/useFocus.ts","x000/Draw/index.tsx","index.tsx"],"names":["Boolean","window","location","hostname","match","domain","Userflag","fetch","process","path","data","headers","base","includes","slice","filter","c","length","urlJoin","indexOf","concat","Date","now","uniqePath","options","credentials","method","mode","FormData","body","JSON","stringify","Object","objectSpread","Content-Type","formdata","then","res","ok","json","statusText","defaultContextModel","popupView","userflag","userName","username","avatar","context","createContext","Provider","Context","props","_this","classCallCheck","this","possibleConstructorReturn","getPrototypeOf","call","state","setContextState","setState","bind","assertThisInitialized","_this2","catch","children","react_default","a","createElement","value","PureComponent","Init","spin","spinning","style","width","height","display","alignItems","justifyContent","x000_Sign","es_form","create","_ref","_ref$form","form","getFieldDecorator","validateFields","_useState","useState","_useState2","slicedToArray","logging","setLogging","useContext","useEffect","document","title","className","onSubmit","e","preventDefault","err","values","console","error","message","backgroundColor","minWidth","padding","Item","rules","required","input","name","prefix","icon","type","color","placeholder","min","valuePropName","initialValue","es_checkbox","onClick","forgetPword","msg","success","es_button","htmlType","loading","withPath","defaultParams","arguments","undefined","defaultQuery","Component","pathOf","pkeys","keys","qkeys","params","_params","map","key","encodeURIComponent","join","getPathOf","withRouteComponent","react_router","reduce","o","k","split","render","_props","React","to","displayName","history","layout","Header","gridTemplateAreas","area","column","chunk","row","allocsize","sizeAll","growAll","partion","floor","grow","size","Math","ceil","whole","getAccordToday","date","_year","getFullYear","_month","getMonth","_date","getDate","_hour","getHours","year","month","_util_divmod","x","y","n","_tree","seed","walk","Array","isArray","b","_ret","array","_loop","val","push","forEach","sub","v","Type","Flow","Pipe","W5H5","id","W3H3","lockwidth","root","barheight","nodes","node","pipe","max","square","result","sqrt","findNode","childId","_ref7","_ref7$children","_iteratorNormalCompletion","_didIteratorError","_iteratorError","_step","_iterator","Symbol","iterator","next","done","uplist","return","frameNode","pathup","FLEX","PIPE","treeNode","handle","newNode","_root$children$reduce","_ref9","child","_ref10","changed","newChild","_root$children$reduce2","replaceNode","oldNode","deleteNode","deleteId","every","_ref11","index","findIndex","_ref12","splice","duplicate","newId","DrawBase","_ref$size","w","h","_ref$title","t","_ref$position","position","p","f","flow","setTitle","_useState3","_useState4","setHeight","_useState5","_useState6","setWidth","_useState7","_useState8","setFlow","_useState9","_useState10","setPosition","disabled","tree","draw-base-item","autoFocus","onChange","_ref2","target","input_number","step","DrawBaseOpen","mainFlow","onSelect","_ref3","flows","L2R","T2B","rows","draw-base-box","enabled","Fragment","flexDirection","r","DrawScale","setMinScale","setMaxScale","setScale","minScale","maxScale","scale","slider","tipFormatter","DrawNode","mainNode","_ref$offset","offset","focusId","draw-node","transform","border","parent","defineProperty","focus","onNodeClick","event","stopPropagation","LOCK","assign","flex","background","GRID","template","gridTemplateRows","gridTemplateColumns","AREA","boxShadow","BONE","bone","backgroundImage","url","DrawGridSub","setArea","startrc","endrc","start","setStart","col","onMouseUp","addEventListener","removeEventListener","gridColumnStart","gridRowStart","gridColumnEnd","gridRowEnd","i","gridArea","onMouseEnter","_a","idx","end","squared","inSquared","onMouseDown","onDoubleClick","DrawGrid","ondown","erc","divmod","src","_zip$map","zip","_zip$map2","from","_","_this$state","_ref4","_ref5","_this$props","onDone","_this$state2","_zip$map3","_ref6","_zip$map4","_this$state3","_this3","_this$props2","_this$children","_this$children2","elem","indices","draw-grid-main","draw-grid-item","selected","isSelected","useDrawGrid","setMainNode","innerNode","_innerNode","current","_oldNewNode","newNodeFlex","newNodeGrid","oldNewNode","_oldNewNode2","chunks","l1","l2","toConsumableArray","useBorder","focusNode","bordered","_addBorder","borderFlow","top","bottom","addBorderNode","borderNode","addBorder","_addBorder2","BORDERS","DrawGridBox","newNodeId","objectWithoutProperties","_useDrawGrid","_useDrawGrid2","borderdata","borderData","_useBorder","_useBorder2","borderless","onBorderClick","draw-grid-box-main","draw-grid-box-border","DrawGrid_DrawGrid","useDuplicate","_focusNode","canDuplicate","duplicateId","startIndex","dups","apply","duplicateNode","useClear","canClear","clearId","clearNode","DrawMenu","_useDuplicate","_useDuplicate2","cantDuplicate","_useDelete","canDelete","useDelete","_useDelete2","cantDelete","_useClear","_useClear2","cantClear","Group","DrawSize","_ref$focusNode","_useState2$","setGrowSize","_setTemplate","setTemplate","MAIN","_lables","lables","label","onGrowChange","onSizeChange","_divmod","_divmod2","rs","cs","_divmod3","lastIndexOf","_divmod4","re","ce","temp","colBase","rowBase","_ref4$","growIndex","_ref4$2","sizeIndex","_ref6$","_ref6$2","isEqual","basement","useMnode","useRef","version","openChildren","initMnode","nodeSizing","useMemo","sizing","sizeTemplate","parentSize","_template$reduce","growTotal","sizeTotal","abs","_template$reduce2","growSize","colTemplate","rowTemplate","first","last","_Flow$L2R$Flow$T2B$pa","flexSizing","_children$reduce","growable","_children$reduce2","calcNodeSizing","setMainNodeData","pos","Number","resizeNode","oldPosition","newPosition","0","find","1","useScale","main","canvas","wh","_setMinScale","_setMaxScale","setOffset","scaleOffset","offsetHeight","offsetWidth","hmin","wmin","_setScale","minaxScale","scrollTo","onResize","_scaleOffset","_scaleOffset2","_scaleOffset3","ResizeObserver","observer","observe","unobserve","useFocus","_setNode","_setFocusNode","_findNode","_findNode2","toArray","containNode","_ref8","_ref8$children","some","setFocusNode","setData","Draw_Draw","author","Draw","_useMnode","log","_useFocus","_useScale","focusKey","innerKey","ref","tabIndex","collapse","defaultActiveKey","Panel","header","grand","isFlexible","canBone","ReactDOM","config_provider","locale","zh_CN","Context_Context","LOADING","UNKNOWN","react_router_dom","basename","component","Head","Sider","theme","exact","getElementById","navigator","serviceWorker","ready","registration","unregister"],"mappings":"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","file":"static/js/main.7b3e8938.chunk.js","sourcesContent":["// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\ntype Config = {\n  onSuccess?: (registration: ServiceWorkerRegistration) => void;\n  onUpdate?: (registration: ServiceWorkerRegistration) => void;\n};\n\nexport function register(config?: Config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(\n      (process as { env: { [key: string]: string } }).env.PUBLIC_URL,\n      window.location.href\n    );\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl: string, config?: Config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl: string, config?: Config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","// see `.env.development` and `.env.production`\nimport fetch from './_fetch';\nexport const host = process.env.REACT_APP_HOST!;\nexport default fetch(host);\n","// require('es6-promise').polyfill();\n// const fetch = require('isomorphic-fetch');\nexport default function(domain: string) {\n  return <T = any>(path: string, data?: any, headers?: any): Promise<T> =>\n    fetch(urlJoin(domain, uniqePath(path)), formdata(data, headers)).then(\n      (res: Response) => {\n        if (res.ok) return res.json() as Promise<T>;\n        throw res.statusText;\n      }\n    );\n}\n\nexport function toFormData(data: any) {\n  const form = new FormData();\n  for (const key in data) {\n    form.append(key, data[key]);\n  }\n  return form;\n}\n\nfunction formdata(data: any, headers: any) {\n  const options: any = {\n    credentials: 'include',\n    method: 'GET',\n    mode: 'cors',\n  };\n  if (headers) {\n    options.headers = headers;\n  }\n  if (data) {\n    options.method = 'POST';\n    if (data instanceof FormData) {\n      options.body = data;\n    } else {\n      options.body = JSON.stringify(data);\n      options.headers = {\n        'Content-Type': 'application/json',\n        ...headers,\n      };\n    }\n  }\n  return options;\n}\n\nfunction uniqePath(path: string) {\n  if (path.indexOf('?') >= 0) {\n    return path + `&ts=${Date.now()}`;\n  }\n  return path + `?ts=${Date.now()}`;\n}\n\nfunction urlJoin(base: string, path: string) {\n  if (path.includes('//')) {\n    return path;\n  }\n  switch ([base.slice(-1), path.slice(0, 1)].filter(c => c === '/').length) {\n    case 2:\n      return base + path.slice(1);\n    case 1:\n      return base + path;\n    default:\n      return base + '/' + path;\n  }\n}\n","/**\n * ```\n * 李鸿章 <poodll@163.com>\n * 7/1/2019, 4:13:34 PM\n * ```\n * doc comment for the file goes here\n */\n\n/** Happy Coding */\nimport React, { createContext, PureComponent, ReactNode } from 'react';\nimport fetch from './fetch';\nimport { message } from 'antd';\nexport enum Userflag {\n  LOADING = -1,\n  UNKNOWN = 0,\n}\n\nexport interface Fetch {\n  userflag: Userflag;\n  userName: string;\n  username: string;\n  avatar: string;\n}\n\n// ##################### start\ninterface Model extends Fetch {\n  popupView: ReactNode;\n}\nconst defaultContextModel: Model = {\n  popupView: null,\n  userflag: 21,\n  userName: '',\n  username: '',\n  avatar: '',\n};\n// ##################### end\n\ninterface Props {\n  children(context: ContextState): React.ReactNode;\n}\n\nexport interface ContextState extends Model {\n  setContextState: PureComponent<Props, Model>['setState'];\n}\n\nexport const context = createContext<ContextState>(\n  defaultContextModel as ContextState\n);\n\nconst { Provider } = context;\n\nexport default class Context extends PureComponent<Props, ContextState> {\n  constructor(props) {\n    super(props);\n    this.state = {\n      setContextState: this.setState.bind(this),\n      ...defaultContextModel,\n    };\n  }\n  componentDidMount() {\n    fetch()\n      .then(data => {\n        this.setState(data);\n      })\n      .catch(() => {\n        this.setState({ userflag: 1 });\n      });\n  }\n  render() {\n    const { children } = this.props;\n    return <Provider value={this.state}>{children(this.state)}</Provider>;\n  }\n}\n","/**\n * ```\n * 李鸿章 <poodll@163.com>\n * 7/1/2019, 4:13:34 PM\n * ```\n * doc comment for the file goes here\n */\n\n/** Happy Coding */\nimport { Fetch } from '.';\nimport fetch from '_fetch';\nexport default (): Promise<Fetch> => fetch(`/core/context`);\n","/**\n * 李鸿章 <poodll@163.com>\n * 6/27/2019, 3:38:42 PM\n */\n\nimport React from 'react';\nimport { Spin } from 'antd';\n\nexport default function Init() {\n  return (\n    <Spin\n      spinning\n      style={{\n        width: '100%',\n        height: '100%',\n        display: 'flex',\n        alignItems: 'center',\n        justifyContent: 'center',\n      }}\n    />\n  );\n}\n","/**\n * ```\n * 李鸿章 <poodll@163.com>\n * 6/27/2019, 3:57:15 PM\n * ```\n * doc comment of the file goes here\n */\n\n/** Happy Coding */\nimport React, { useState, useEffect, useContext } from 'react';\n\nimport { Form, Icon, Input, Button, Checkbox, message } from 'antd';\nimport { FormComponentProps } from 'antd/lib/form';\nimport { context } from '_base/Context';\n// import Component from '_view/Component';\n\nimport { signin, forgetPword } from './fetch';\n\nfunction Sign({\n  form: { getFieldDecorator, validateFields },\n}: FormComponentProps) {\n  const [logging, setLogging] = useState(false);\n  const { setContextState } = useContext(context);\n  useEffect(() => {\n    document.title = '请登录';\n  }, []);\n\n  const handleSubmit = e => {\n    e.preventDefault();\n    validateFields((err, values) => {\n      if (!err) {\n        setLogging(true);\n        signin(values)\n          .then(data => {\n            setContextState(data);\n            setLogging(false);\n          })\n          .catch(err => {\n            message.error(err);\n            setLogging(false);\n          });\n      } else {\n        console.error(err);\n      }\n    });\n  };\n  const handleForgetPword = () => {\n    validateFields(['username'], (err, values) => {\n      if (!err) {\n        forgetPword(values)\n          .then(msg => {\n            message.success(msg);\n          })\n          .catch(err => {\n            message.error(err);\n          });\n      } else {\n        console.error(err);\n      }\n    });\n  };\n  return (\n    <div\n      style={{\n        width: '100%',\n        height: '100%',\n        display: 'flex',\n        alignItems: 'center',\n        justifyContent: 'center',\n      }}>\n      <Form\n        className=\"-glob-box-shadow\"\n        onSubmit={handleSubmit}\n        style={{\n          backgroundColor: 'white',\n          minWidth: '320px',\n          padding: '48px 32px',\n        }}>\n        <Form.Item>\n          {getFieldDecorator('username', {\n            rules: [{ required: true, message: '请输入电子邮箱' }],\n          })(\n            <Input\n              name=\"username\"\n              prefix={<Icon type=\"user\" style={{ color: 'rgba(0,0,0,.25)' }} />}\n              placeholder=\"电子邮箱\"\n            />\n          )}\n        </Form.Item>\n        <Form.Item>\n          {getFieldDecorator('password', {\n            rules: [\n              {\n                required: true,\n                message: '请输入密码（不少于 8 位）',\n                min: 8,\n              },\n            ],\n          })(\n            <Input\n              prefix={<Icon type=\"lock\" style={{ color: 'rgba(0,0,0,.25)' }} />}\n              type=\"password\"\n              name=\"password\"\n              placeholder=\"密码\"\n            />\n          )}\n        </Form.Item>\n        <Form.Item>\n          <div style={{ display: 'flex', justifyContent: 'space-between' }}>\n            {getFieldDecorator('remember', {\n              valuePropName: 'checked',\n              initialValue: true,\n            })(<Checkbox>记住登录</Checkbox>)}\n            <a className=\"login-form-forgot\" onClick={handleForgetPword}>\n              忘记密码\n            </a>\n          </div>\n          <Button\n            type=\"primary\"\n            htmlType=\"submit\"\n            loading={logging}\n            style={{ width: '100%' }}>\n            登录\n          </Button>\n          {/* <Icon type=\"login\" /> <a href=\"\">现在注册</a> */}\n        </Form.Item>\n      </Form>\n    </div>\n  );\n}\n\nexport default Form.create()(Sign);\n","/**\n * 李鸿章 <poodll@163.com>\n * 6/27/2019, 3:57:15 PM\n */\n\nimport fetch from '_fetch';\n\nexport function signin(data) {\n  return fetch(`/x000/signin`, data);\n}\n\nexport function forgetPword({ username }) {\n  return fetch(`/x000/forget-pword`, { username }).then(\n    () => `登录密码已发送，请查收你的邮箱`\n  );\n}\n","import React, { FunctionComponent } from 'react';\nimport { RouteComponentProps, Redirect, Switch, Route } from 'react-router-dom';\n\ntype Params = {\n  [key: string]: string;\n};\n\ntype PathOf<T extends Params> = {\n  pathOf(params?: Partial<Record<keyof T, string | number>>): string;\n  path: string;\n};\n\ntype Mix<T, A> = (Component: T) => T & A;\n\nexport default function withPath<T extends Params, Q extends Params>(\n  path: string,\n  defaultParams: T = {} as T,\n  defaultQuery: Q = {} as Q\n): Mix<FunctionComponent<RouteComponentProps<T>>, PathOf<T & Q>> {\n  return Component => {\n    const pathOf = getPathOf(path, defaultParams, defaultQuery);\n    let withRouteComponent = Component as any;\n    if (Object.keys(defaultParams).length) {\n      withRouteComponent = (props: RouteComponentProps<T>) => (\n        <Switch>\n          <Route\n            path={pathOf(keyParams(defaultParams) as any).split('?')[0]}\n            // component={Component}\n            render={_props =>\n              React.createElement(Component, { ...props, ..._props })\n            }\n          />\n          <Redirect to={pathOf({ ...defaultParams, ...defaultQuery } as any)} />\n        </Switch>\n      );\n    }\n    withRouteComponent.displayName = `withPath(${path})`;\n    withRouteComponent.pathOf = pathOf;\n    withRouteComponent.path = path;\n    return withRouteComponent;\n  };\n}\n\nfunction getPathOf<T extends Params, Q extends Params>(\n  path: string,\n  defaultParams: T,\n  defaultQuery: Q\n): PathOf<T & Q>['pathOf'] {\n  const pkeys = Object.keys(defaultParams);\n  const qkeys = Object.keys(defaultQuery);\n  if (pkeys.length && qkeys.length) {\n    return params => {\n      const _params = { ...defaultParams, ...defaultQuery, ...params };\n      return `${path}/${pkeys\n        .map(key => encodeURIComponent(_params[key]))\n        .join('/')}?${qkeys\n        .map(key => `${key}=${encodeURIComponent(_params[key])}`)\n        .join('&')}`;\n    };\n  }\n  if (pkeys.length) {\n    return params => {\n      const _params = { ...defaultParams, params };\n      return `${path}/${pkeys\n        .map(key => encodeURIComponent(_params[key]))\n        .join('/')}`;\n    };\n  }\n  if (qkeys.length) {\n    return params => {\n      const _params = { ...defaultQuery, ...params };\n      return `${path}?${qkeys\n        .map(key => `${key}=${encodeURIComponent(_params[key])}`)\n        .join('&')}`;\n    };\n  }\n  return () => path;\n}\n\nfunction keyParams<T extends Params>(params: T): T {\n  return Object.keys(params).reduce(\n    (o, k) => (((o as any)[k] = `:${k}`), o),\n    {} as T\n  );\n}\n","/**\n * ```\n * 李鸿章 <poodll@163.com>\n * 7/2/2019, 11:09:49 AM\n * ```\n * doc comment for the file goes here\n */\n\n/** Happy Coding */\nimport React, { useState, useEffect } from 'react';\nimport { RouteComponentProps } from 'react-router-dom';\n\nimport { Layout } from 'antd';\nimport withPath from '_base/withPath';\n//import Component from '_view/Component';\n\nimport { getData } from './fetch';\n\nexport default withPath('/x000/head', {})(function Head({\n  history,\n  match: { params },\n}) {\n  const loading = true;\n\n  useEffect(() => {\n    document.title = 'Title';\n  }, []);\n\n  return (\n    <Layout.Header\n      className=\"-glob-box-shadow\"\n      style={{\n        height: '85px',\n        display: 'flex',\n        padding: '0',\n        backgroundColor: 'white',\n      }}>\n      Header\n    </Layout.Header>\n  );\n});\n","import { CSSProperties } from 'react';\nimport chunk from 'lodash/chunk';\n\nexport function gridTemplateAreas(area: number[], column: number) {\n  return chunk(area, column)\n    .map(row => `\"${row.map(a => `a${a}`).join(' ')}\"`)\n    .join(' ');\n}\n\nexport function gridTemplateStyle(\n  template: number[],\n  column: number\n): CSSProperties {\n  return {\n    gridTemplateRows: template\n      .slice(column)\n      .map((value, index) => (index % 2 ? `${value}px` : `${value}fr`))\n      .join(' '),\n    gridTemplateColumns: template\n      .slice(0, column)\n      .map((value, index) => (index % 2 ? `${value}px` : `${value}fr`))\n      .join(' '),\n  };\n}\n","export default function allocsize(\n  sizeAll: number,\n  growAll: number\n): (grow: number) => number {\n  const partion = sizeAll / (growAll || 1);\n  let floor = false;\n  const whole = (size: number) => {\n    if ((floor = !floor)) {\n      return Math.floor(size);\n    }\n    return Math.ceil(size);\n  };\n  return grow => {\n    if (grow <= 0) {\n      return 0;\n    }\n    if ((growAll -= grow) === 0) {\n      return sizeAll;\n    }\n    if (growAll > 0) {\n      const size = whole(grow * partion);\n      sizeAll -= size;\n      return size;\n    }\n    throw 'No size to alloc anymore!';\n  };\n}\n","type Data = {\n  year: number;\n  month: number;\n  date: number;\n  hour: number;\n  minute: number;\n  second: number;\n};\ntype Pad = (n: number) => string;\ntype Formater<T> = (data: Data, pad: Pad) => T;\n\nexport default function strftime(timestamp: number): string;\nexport default function strftime<T>(timestamp: number, format: Formater<T>): T;\nexport default function strftime(timestamp: any, format: any = longFormat) {\n  const date = new Date(timestamp);\n  const data = {\n    year: date.getFullYear(),\n    month: date.getMonth() + 1,\n    date: date.getDate(),\n    hour: date.getHours(),\n    minute: date.getMinutes(),\n    second: date.getSeconds(),\n  };\n  const pad: Pad = n => `0${n}`.slice(-2);\n  return format(data, pad);\n}\n\nexport const shortFormat: Formater<string> = (\n  { month, date, hour, minute },\n  pad\n) => `${pad(month)}-${pad(date)} ${pad(hour)}:${pad(minute)}`;\n\nexport const longFormat: Formater<string> = (\n  { year, month, date, hour, minute },\n  pad\n) => `${year}年${month}月${date}日 ${pad(hour)}:${pad(minute)}`;\n\nfunction getAccordToday(date: Date) {\n  const _year = date.getFullYear();\n  const _month = date.getMonth() + 1;\n  const _date = date.getDate();\n  const _hour = date.getHours();\n  return (year: number, month: number, date: number) => {\n    if (_hour > 20) {\n      accordToday = getAccordToday(new Date());\n    }\n    if (year === _year) {\n      if (month === _month) {\n        switch (_date - date) {\n          case 0:\n            return '';\n          case 1:\n            return '昨天';\n          default:\n            return `${date}日`;\n        }\n      }\n      return `${month}月${date}日`;\n    }\n    return `${year}年${month}月${date}日`;\n  };\n}\n\nlet accordToday = getAccordToday(new Date());\n\nfunction getTime(hour: number, minute: number, pad: Pad) {\n  if (hour < 6) {\n    return `凌晨 ${hour}:${pad(minute)}`;\n  }\n  if (hour < 12) {\n    return `早上 ${hour}:${pad(minute)}`;\n  }\n  if (hour < 18) {\n    return `下午 ${hour - 12}:${pad(minute)}`;\n  }\n  return `晚上 ${hour - 12}:${pad(minute)}`;\n}\nexport const chatFormat: Formater<string> = (\n  { year, month, date, hour, minute },\n  pad\n) => `${accordToday(year, month, date)}${getTime(hour, minute, pad)}`;\n","export default function(x: number, y: number, n: number = 0): [number, number] {\n  return [Math.floor(x / y) + n, (x % y) + n];\n}\n","export default (seed: any) => walk(seed).join(' ');\n\nfunction walk(seed: any): string[] {\n  if ((seed && seed !== true) || seed === 0) {\n    if (Array.isArray(seed)) {\n      return seed.map(walk).reduce((a, b) => a.concat(b), []);\n    }\n    const type = typeof seed;\n    if (type === 'string' || type === 'number') {\n      return [seed];\n    } else if (type === 'object') {\n      const array: string[] = [];\n      for (const key in seed) {\n        const val = seed[key];\n        if (val || val === 0) {\n          array.push(key);\n          walk(val).forEach(sub => {\n            array.push(key + '-' + sub);\n          });\n        }\n      }\n      return array;\n    }\n  }\n  return [];\n}\n","import lastIndexOf from 'lodash/lastIndexOf';\nimport indexOf from 'lodash/indexOf';\nimport { divmod, allocsize } from '_util';\nexport enum Type {\n  MAIN = 'main', // 门框\n  LOCK = 'lock', // 门隙\n  FLEX = 'flex', // 伸缩\n  GRID = 'grid', // 网格\n  AREA = 'area', // 空白\n  PIPE = 'pipe', // 钢管\n  BONE = 'bone', // 花纹\n}\n\nexport enum Flow {\n  T2B = 'column',\n  L2R = 'row',\n}\n\nexport interface Pipe {\n  id: string;\n  width: number;\n  height: number;\n  color: string;\n}\n\nexport const Pipe: Record<'W5H5' | 'W3H3', Pipe> = {\n  W5H5: {\n    id: 'W5H5',\n    width: 50,\n    height: 50,\n    color: 'gray',\n  },\n  W3H3: {\n    id: 'W3H3',\n    width: 30,\n    height: 30,\n    color: 'gray',\n  },\n};\n\nexport interface Bone {\n  id: string;\n  width: number;\n  height: number;\n  url: string;\n}\n\nexport const Bone: Record<'CUTTING', Bone> = {\n  CUTTING: {\n    id: 'CUTTING',\n    width: 240,\n    height: 480,\n    url: '',\n  },\n};\n\nexport type NodeMain = {\n  id: number;\n  title: string;\n  author: string;\n  version: number;\n  type: Type.MAIN;\n  flow: Flow;\n  width: number;\n  height: number;\n  children: Node[];\n};\n\nexport type NodeLock = {\n  id: number;\n  type: Type.LOCK;\n  // no children\n};\n\nexport type NodeFlex = {\n  id: number;\n  type: Type.FLEX;\n  flow: Flow;\n  size: number;\n  grow: number;\n  children: Node[];\n};\n\nexport type NodeGrid = {\n  id: number;\n  type: Type.GRID;\n  size: number;\n  grow: number;\n  column: number;\n  area: number[];\n  template: number[];\n  children: Node[];\n};\n\nexport type NodeArea = {\n  id: number;\n  type: Type.AREA;\n  size: number;\n  grow: number;\n  // no children\n};\n\nexport type NodePipe = {\n  id: number;\n  type: Type.PIPE;\n  pipe: Pipe;\n  // no children\n};\n\nexport type NodeBone = {\n  id: number;\n  type: Type.BONE;\n  bone: Bone;\n  size: number;\n  grow: number;\n  // no children\n};\n\n// children\nexport type NodeTree = NodeMain | NodeGrid | NodeFlex;\n// no children\nexport type NodeLeaf = NodeLock | NodeArea | NodePipe | NodeBone;\n// .grow .size\nexport type NodeGrow = NodeArea | NodeFlex | NodeGrid | NodeBone;\nexport type Node = NodeTree | NodeLeaf;\n\nexport function lockwidth(root: NodeMain) {\n  const barheight = (nodes: Node[]): number => {\n    return nodes.reduce((a, node) => {\n      const { children, pipe } = node as NodeFlex & NodePipe;\n      if (children && children.length > 0) {\n        return Math.max(a, barheight(children));\n      } else if (pipe && pipe.height > 0) {\n        return Math.max(a, pipe.height);\n      } else {\n        return a;\n      }\n    }, 0);\n  };\n  const { width, children } = root;\n  const height = barheight(children);\n  const square = (width - height) * (width + height);\n  const result = width - Math.sqrt(square);\n  // NOTE: 0 | 01 | 10 | 010\n  return Math.ceil(result * (children.length - 1));\n}\n\nexport function calcNodeSizing(root: NodeMain) {\n  const sizing: { [key: number]: { width: number; height: number } } = {\n    [root.id]: {\n      width: root.width,\n      height: root.height,\n    },\n  };\n  const tree = (parent: NodeTree, children: Node[]) => {\n    if (parent.type === Type.GRID) {\n      // TODO\n      const sizeTemplate = (\n        parentSize: number,\n        template: number[]\n      ): number[] => {\n        const [growTotal, sizeTotal] = template.reduce(\n          ([growTotal, sizeTotal], a, index) => {\n            if (index % 2) {\n              return [growTotal, sizeTotal + Math.abs(a)];\n            } else {\n              return [growTotal + a, sizeTotal];\n            }\n          },\n          [0, 0]\n        );\n        const growSize = allocsize(parentSize - sizeTotal, growTotal);\n        return template.map((a, index) => {\n          if (index % 2) {\n            return Math.abs(a);\n          } else {\n            return growSize(a);\n          }\n        });\n      };\n      // to be continue\n      const { column, template, area, children } = parent;\n      const colTemplate = sizeTemplate(\n        sizing[parent.id].width,\n        template.slice(0, column)\n      );\n      const rowTemplate = sizeTemplate(\n        sizing[parent.id].height,\n        template.slice(column)\n      );\n      children.forEach((node, index) => {\n        const first = indexOf(area, index);\n        const last = lastIndexOf(area, index);\n        const [rs, cs] = divmod(first, column);\n        const [re, ce] = divmod(last, column, 1);\n        sizing[node.id] = {\n          width: colTemplate.slice(cs, ce).reduce((a, b) => a + b, 0),\n          height: rowTemplate.slice(rs, re).reduce((a, b) => a + b, 0),\n        };\n        if (node.type === Type.FLEX || node.type === Type.GRID) {\n          tree(node, node.children);\n        }\n      });\n    } else {\n      const flexSizing = ({ id, flow }: typeof parent, size: number) => {\n        if (flow === Flow.L2R) {\n          return {\n            width: size,\n            height: sizing[id].height,\n          };\n        } else {\n          return {\n            width: sizing[id].width,\n            height: size,\n          };\n        }\n      };\n      const [sizeTotal, growTotal, growable] = children.reduce(\n        ([sizeTotal, growTotal, growable], child) => {\n          if (child.type === Type.LOCK) {\n            const size = lockwidth(parent as NodeMain);\n            sizing[child.id] = flexSizing(parent, size);\n            return [sizeTotal + size, growTotal, growable];\n          } else if (child.type === Type.PIPE) {\n            const size = child.pipe.width;\n            sizing[child.id] = flexSizing(parent, size);\n            return [sizeTotal + size, growTotal, growable];\n          } else if (child.type === Type.MAIN) {\n            throw `Only one '${Type.MAIN}' one tree`;\n          } else {\n            const { grow, size } = child;\n            return [\n              sizeTotal + Math.abs(size),\n              growTotal + grow,\n              growable.concat(child),\n            ];\n          }\n        },\n        [0, 0, [] as NodeGrow[]]\n      );\n      const parentSize =\n        sizing[parent.id][\n          { [Flow.L2R]: 'width', [Flow.T2B]: 'height' }[parent.flow]\n        ];\n      const growSize = allocsize(parentSize - sizeTotal, growTotal);\n      growable.forEach(node => {\n        const { size, grow } = node;\n        sizing[node.id] = flexSizing(parent, Math.abs(size) + growSize(grow));\n        if (node.type !== Type.AREA && node.type !== Type.BONE) {\n          tree(node, node.children);\n        }\n      });\n    }\n  };\n  tree(root, root.children);\n  return sizing;\n}\n\nexport function findNode(root: Node, childId: number): [Node, ...NodeTree[]] {\n  const { id, children = [] } = root as NodeTree;\n  if (id === childId) return [root];\n  for (const node of children) {\n    const uplist = findNode(node, childId);\n    if (uplist.length) {\n      return uplist.concat(root) as any;\n    }\n  }\n  return [] as any;\n}\n\nexport function containNode(root: Node, childId: number): boolean {\n  const { id, children = [] } = root as NodeTree;\n  return id === childId || children.some(node => containNode(node, childId));\n}\n\nexport function frameNode(pathup: NodeTree[]): Node[] {\n  if (\n    // NOTE: > 2 not 1, last position is NodeMain\n    pathup.length > 2 &&\n    pathup[1].type === Type.FLEX &&\n    pathup[1].children.reduce(\n      (b, n) => b && (n.type === Type.PIPE || n.id === pathup[0].id),\n      true\n    )\n  ) {\n    return frameNode(pathup.slice(1));\n  }\n  return pathup;\n}\n\nexport function treeNode<T extends NodeTree>(\n  root: T,\n  handle: (node: Node) => Node\n): T {\n  const newNode = handle(root);\n  if (newNode !== root) {\n    return newNode as T;\n  }\n  if (!root.children) return root;\n  const [children, changed] = root.children.reduce<[Node[], boolean]>(\n    ([children, changed], child) => {\n      const newChild = treeNode(child as T, handle);\n      children.push(newChild);\n      return [children, changed || child !== newChild];\n    },\n    [[], false]\n  );\n  return changed ? { ...root, children } : root;\n}\n\nexport function replaceNode<T extends NodeTree>(\n  root: T,\n  oldNode: Node,\n  newNode: Node\n): T {\n  return treeNode(root, node => (node.id === oldNode.id ? newNode : node));\n}\n\nexport function deleteNode<T extends NodeTree>(root: T, deleteId: number): T {\n  return treeNode(root, node => {\n    if (\n      node.type !== Type.FLEX ||\n      node.children.every(({ id }) => id !== deleteId)\n    ) {\n      return node;\n    }\n    const index = node.children.findIndex(({ id }) => id === deleteId);\n    const children = node.children.slice();\n    if (children[index].type === Type.PIPE) {\n      children.splice(index, 1);\n    } else {\n      children.splice(index && index - 1, 2);\n    }\n    switch (children.length) {\n      case 1:\n        return { ...children[0], size: node.size, grow: node.grow };\n      case 0:\n        throw 'Not Implemented';\n      default:\n        return {\n          ...node,\n          children,\n        };\n    }\n  });\n}\n\nexport function duplicate<T extends Node>(\n  root: T,\n  newId: (oldId: number) => number\n): T {\n  const newNode = { ...root, id: newId(root.id) };\n  if (root['children']) {\n    newNode['children'] = root['children'].map(node => duplicate(node, newId));\n  }\n  return newNode;\n}\n","/**\n * ```\n * 李鸿章 <poodll@163.com>\n * 9/18/2019, 8:28:33 PM\n * ```\n * doc comment for the file goes here\n */\n\n/** Happy Coding */\nimport React, {\n  useState,\n  ReactNode,\n  ReactEventHandler,\n  SetStateAction,\n  Dispatch,\n} from 'react';\n// import { Link } from 'react-router-dom';\nimport { Input, InputNumber, Button } from 'antd';\n\n// import chunk from 'lodash/chunk';\nimport { tree } from '_util';\n\nimport './style.scss';\nimport { Flow, Node, Type } from '_type/struct';\n\nexport interface DrawBaseProps {\n  onSubmit({ width, height, title, flow, position }): void;\n  size?: 'large' | 'small' | 'default';\n  width?: number;\n  height?: number;\n  title?: string;\n  position?: string;\n  flow?: Flow;\n}\n\nexport default function DrawBase({\n  onSubmit,\n  size = 'default',\n  width: w,\n  height: h,\n  title: t = '',\n  position: p = '',\n  flow: f,\n}: DrawBaseProps) {\n  const [title, setTitle] = useState(t);\n  const [height, setHeight] = useState(h);\n  const [width, setWidth] = useState(w);\n  const [flow, setFlow] = useState(f);\n  const [position, setPosition] = useState(p);\n  const onClick = () => {\n    onSubmit({ width, height, title, flow, position });\n  };\n  const disabled =\n    !width ||\n    !height ||\n    !title ||\n    !position ||\n    (title === t &&\n      height === h &&\n      width === w &&\n      position === p &&\n      flow === f);\n  return (\n    <div className=\"draw-base-main\">\n      <div className={tree({ 'draw-base-item': size })}>\n        <div>名称：</div>\n        <Input\n          placeholder=\"请输入名称\"\n          autoFocus={size !== 'small'}\n          onChange={({ target: { value } }) => setTitle(value)}\n          value={title}\n          size={size}\n        />\n      </div>\n      <div className={tree({ 'draw-base-item': size })}>\n        <div>　宽：</div>\n        <InputNumber\n          onChange={value => setWidth(value!)}\n          placeholder=\"单位：毫米(mm)\"\n          value={width}\n          size={size}\n          step={10}\n          min={0}\n          //\n        />\n        <div>　高：</div>\n        <InputNumber\n          onChange={value => setHeight(value!)}\n          placeholder=\"单位：毫米(mm)\"\n          value={height}\n          size={size}\n          step={10}\n          min={0}\n          //\n        />\n      </div>\n      <div className={tree({ 'draw-base-item': size })}>\n        <div>开口：</div>\n        <DrawBaseOpen\n          size={size}\n          position={position}\n          mainFlow={flow}\n          onSelect={(flow, row) => {\n            setFlow(flow);\n            setPosition(row);\n          }}\n        />\n      </div>\n      <div className={tree({ 'draw-base-item': size })}>\n        <div>　　　</div>\n        <Button\n          onClick={onClick}\n          size={size}\n          type=\"primary\"\n          disabled={disabled}>\n          确定\n        </Button>\n      </div>\n    </div>\n  );\n}\n\nfunction DrawBaseOpen({ size, position, mainFlow, onSelect }) {\n  const flows = [Flow.L2R, Flow.T2B];\n  const rows = ['10', '01', '010'];\n  return (\n    <div className=\"draw-base-open\" title=\"请选择开口位置\">\n      <div\n        onClick={() => onSelect(mainFlow || Flow.L2R, '0')}\n        className={tree({\n          'draw-base-box': [size, { enabled: position === '0' }],\n        })}\n      />\n      {flows.map(flow => (\n        <React.Fragment key={flow}>\n          {rows.map(row => (\n            <div\n              key={row}\n              onClick={() => onSelect(flow, row)}\n              className={tree({\n                'draw-base-box': [\n                  size,\n                  {\n                    enabled: flow === mainFlow && row === position,\n                  },\n                ],\n              })}\n              style={{ flexDirection: flow }}>\n              {row.split('').map(r => (\n                <div key={r} className={`draw-base-box-${r}`} />\n              ))}\n            </div>\n          ))}\n        </React.Fragment>\n      ))}\n    </div>\n  );\n}\n","/**\n * ```\n * 李鸿章 <poodll@163.com>\n * 9/6/2019, 2:11:17 PM\n * ```\n * doc comment for the file goes here\n */\n\n/** Happy Coding */\nimport React, { ReactEventHandler } from 'react';\n// import { Link } from 'react-router-dom';\nimport { Icon, Slider } from 'antd';\n// import chunk from 'lodash/chunk';\n// import { tree } from '_util';\n\nimport './style.scss';\n\nexport interface DrawScaleProps {\n  setMinScale: ReactEventHandler;\n  setMaxScale: ReactEventHandler;\n  setScale(scale: number): void;\n  minScale: number;\n  maxScale: number;\n  scale: number;\n}\n\nexport default function DrawScale({\n  setMinScale,\n  setMaxScale,\n  setScale,\n  minScale,\n  maxScale,\n  scale,\n}: DrawScaleProps) {\n  return (\n    <div className=\"draw-scale-main\">\n      <Icon\n        type=\"minus-circle\"\n        className=\"draw-scale-min\"\n        onClick={setMinScale}\n      />\n      <Slider\n        className=\"draw-scale-slider\"\n        min={minScale}\n        max={maxScale}\n        tipFormatter={value => `${value}%`}\n        onChange={scale => setScale(scale as number)}\n        value={scale}\n      />\n      <Icon\n        type=\"plus-circle\"\n        className=\"draw-scale-max\"\n        onClick={setMaxScale}\n      />\n    </div>\n  );\n}\n","/**\n * ```\n * 李鸿章 <poodll@163.com>\n * 9/6/2019, 2:34:13 PM\n * ```\n * doc comment for the file goes here\n */\n\n/** Happy Coding */\nimport React, { ReactNode, ReactEventHandler, SyntheticEvent } from 'react';\n// import { Link } from 'react-router-dom';\n// import { Icon } from 'antd';\n// import chunk from 'lodash/chunk';\nimport { tree, gridTemplateAreas, gridTemplateStyle } from '_util';\nimport { NodeMain, Node, lockwidth, Type } from '_type/struct';\n\nimport './style.scss';\n\nexport interface DrawNodeProps {\n  mainNode: NodeMain;\n  focusId: number;\n  scale: number;\n  offset: [number, number];\n  onClick(node: Node): void;\n}\n\n// TODO: https://github.com/clauderic/react-sortable-hoc\nexport default function DrawNode({\n  mainNode,\n  offset: [x, y],\n  scale,\n  focusId,\n  onClick,\n}: DrawNodeProps) {\n  return (\n    <div\n      className={tree({ 'draw-node': mainNode.type })}\n      style={{\n        transform: `translate(${x}px, ${y}px) scale(${scale / 100})`,\n        width: `${mainNode.width}px`,\n        height: `${mainNode.height}px`,\n        flexDirection: mainNode.flow,\n        border: `${(1 * 100) / scale}px solid #eee`,\n      }}>\n      {mainNode.children.map(child =>\n        render(child, mainNode, focusId, onClick)\n      )}\n    </div>\n  );\n}\n\nfunction render(\n  node: Node,\n  parent: Node,\n  focusId: number,\n  onClick: DrawNodeProps['onClick']\n) {\n  const props = {\n    key: node.id,\n    className: tree({\n      'draw-node': { focus: node.id === focusId, [node.type]: true },\n    }),\n  };\n  const onNodeClick: ReactEventHandler = event => {\n    event.stopPropagation();\n    onClick(node);\n  };\n  switch (node.type) {\n    // case Type.MAIN: see DrawNode\n    case Type.LOCK:\n      return (\n        <div\n          {...props}\n          style={{\n            flex: `0 0 ${lockwidth(parent as NodeMain)}px`,\n            // flex: `0 0 0.5%`,\n            background: 'yellow',\n          }}\n        />\n      );\n    case Type.GRID:\n      return (\n        <div\n          {...props}\n          style={{\n            display: 'grid',\n            flex: `${node.grow} ${node.grow} ${node.size}px`,\n            gridTemplateAreas: gridTemplateAreas(node.area, node.column),\n            ...gridTemplateStyle(node.template, node.column),\n          }}>\n          {node.children.map(child => render(child, node, focusId, onClick))}\n        </div>\n      );\n    case Type.FLEX:\n      return (\n        <div\n          {...props}\n          onClick={onNodeClick}\n          style={{\n            display: 'flex',\n            flexDirection: node.flow,\n            flex: `${node.grow} ${node.grow} ${node.size}px`,\n          }}>\n          {node.children.map(child => render(child, node, focusId, onClick))}\n        </div>\n      );\n    case Type.AREA:\n      return (\n        <div\n          {...props}\n          onClick={onNodeClick}\n          style={{\n            flex: `${node.grow} ${node.grow} ${node.size}px`,\n          }}\n        />\n      );\n    case Type.PIPE:\n      const size = Math.ceil(node.pipe.width / 10);\n      return (\n        <div\n          {...props}\n          onClick={onNodeClick}\n          style={{\n            flex: `0 0 ${node.pipe.width}px`,\n            // background: 'linear-gradient(45deg, #777, #aaa, #777)',\n            background: '#777',\n            boxShadow: `inset ${size}px 0 ${size}px #aaa`,\n          }}\n        />\n      );\n    case Type.BONE:\n      return (\n        <div\n          {...props}\n          onClick={onNodeClick}\n          style={{\n            width: `${node.bone.width}px`,\n            height: `${node.bone.height}px`,\n            backgroundImage: `url(${node.bone.url})`,\n          }}\n        />\n      );\n  }\n}\n","/**\n * ```\n * 李鸿章 <poodll@163.com>\n * 9/9/2019, 3:18:34 PM\n * ```\n * doc comment for the file goes here\n */\n\n/** Happy Coding */\nimport React, {\n  ReactNode,\n  ReactEventHandler,\n  useState,\n  useEffect,\n  Dispatch,\n  SetStateAction,\n} from 'react';\n// import { Link } from 'react-router-dom';\n// import { Icon } from 'antd';\nimport { gridTemplateAreas } from '_util';\n\nimport DrawGrid, { inSquared } from '../DrawGrid';\n\nimport './style.scss';\n\nexport interface DrawGridSubProps {\n  setArea: DrawGrid['setState'];\n  startrc: [number, number];\n  endrc: [number, number];\n  area: number[];\n  children: ReactNode;\n}\n\nexport default function DrawGridSub({\n  setArea,\n  startrc,\n  endrc,\n  area,\n  children,\n}: DrawGridSubProps) {\n  const [start, setStart] = useState(-1);\n  const col = endrc[1] - startrc[1];\n  // const [row, col] = zip(endrc, startrc).map(([e, s]) => e! - s!);\n  // const [area, setArea] = useState(\n  //   Array.from({ length: row * col }).map((_, index) => index)\n  // );\n  useEffect(() => {\n    const onMouseUp = () => {\n      setStart(-1);\n    };\n    document.addEventListener('mouseup', onMouseUp);\n    return () => {\n      document.removeEventListener('mouseup', onMouseUp);\n    };\n  }, []);\n  return (\n    <div\n      className=\"draw-grid-sub-main\"\n      style={{\n        gridColumnStart: startrc[1] + 1,\n        gridRowStart: startrc[0] + 1,\n        gridColumnEnd: endrc[1] + 1,\n        gridRowEnd: endrc[0] + 1,\n        gridTemplateAreas: gridTemplateAreas(area, col),\n      }}>\n      {area\n        .filter((a, i) => a === i)\n        .map(a => (\n          <div\n            key={a}\n            className=\"draw-grid-sub-item\"\n            style={{ gridArea: `a${a}` }}\n            onMouseEnter={() => {\n              // Step 2\n              if (start > -1 && area.every((_a, i) => _a === i || _a !== a)) {\n                setArea(({ area }) => ({\n                  area: area.map((_a, i) =>\n                    inSquared(i, start, a, col) ? start : _a\n                  ),\n                }));\n              }\n            }}\n            onMouseDown={() => {\n              // Step 1\n              if (area.every((_a, i) => _a === i || _a !== a)) {\n                setStart(a);\n              }\n            }}\n            onDoubleClick={() => {\n              setArea(({ area }) => ({\n                area: area.map((_a, index) => (_a === a ? index : _a)),\n              }));\n            }}\n          />\n        ))}\n      {children}\n    </div>\n  );\n}\n","/**\n * ```\n * 李鸿章 <poodll@163.com>\n * 9/6/2019, 5:31:08 PM\n * ```\n * doc comment for the file goes here\n */\n\n/** Happy Coding */\nimport React, { ReactNode, ReactEventHandler } from 'react';\n// import { Link } from 'react-router-dom';\n// import { Icon } from 'antd';\n// import chunk from 'lodash/chunk';\nimport zip from 'lodash/zip';\nimport { tree, divmod } from '_util';\nimport DrawGridSub from '../DrawGridSub';\nimport './style.scss';\n\nexport interface DrawGridProps {\n  squared: number;\n  disabled: boolean;\n  onDone(column: number, area: number[]): void;\n}\n\ninterface DrawGridState {\n  ondown: boolean;\n  start: number;\n  end: number;\n  area: number[];\n}\n\nexport default class DrawGrid extends React.PureComponent<\n  DrawGridProps,\n  DrawGridState\n> {\n  constructor(props) {\n    super(props);\n    this.setState = this.setState.bind(this);\n    this.state = {\n      ondown: false,\n      start: -1,\n      end: -1,\n      area: [],\n    };\n  }\n  onMouseUp = () => {\n    if (!this.state.ondown) return;\n    this.setState(({ start, end, ondown }) => {\n      if (!ondown) return null;\n      const { squared } = this.props;\n      const erc = divmod(end, squared);\n      const src = divmod(start, squared);\n      const [row, col] = zip(erc, src).map(([e, s]) => e! - s! + 1);\n      return {\n        area: Array.from({ length: row * col }).map((_, index) => index),\n        ondown: false,\n      };\n    });\n  };\n  componentDidMount() {\n    document.addEventListener('mouseup', this.onMouseUp);\n  }\n  componentWillUnmount() {\n    document.removeEventListener('mouseup', this.onMouseUp);\n  }\n  children(): [React.ReactChild | null, number[]] {\n    const { squared, disabled, onDone } = this.props;\n    const { start, end, ondown, area } = this.state;\n    if (disabled || start < 0 || end < 0 || ondown) {\n      const indices = Array.from({ length: squared * squared }).map(\n        (_, index) => index\n      );\n      return [null, indices];\n    }\n    const erc = divmod(end, squared, 1);\n    const src = divmod(start, squared);\n    const [row, col] = zip(erc, src).map(([e, s]) => e! - s!);\n    const elem = (\n      <DrawGridSub\n        setArea={this.setState}\n        startrc={src}\n        endrc={erc}\n        area={area}>\n        <div\n          title=\"移动\"\n          className=\"draw-grid-move\"\n          onMouseDown={() => {\n            this.setState({ ondown: true });\n          }}\n        />\n        <div\n          title=\"完成\"\n          className=\"draw-grid-okay\"\n          onMouseDown={() => {\n            onDone(col, area);\n          }}\n        />\n      </DrawGridSub>\n    );\n    const indices = Array.from({ length: squared * squared - row * col }).map(\n      (_, index) => {\n        if (index < start) return index;\n        const floor = Math.floor((index - start) / (squared - col));\n        return index + Math.min(floor + 1, row) * col;\n      }\n    );\n    return [elem, indices];\n  }\n  isSelected(index: number): boolean {\n    const { start, end } = this.state;\n    const { squared } = this.props;\n    const min = start;\n    const max = end;\n    return (\n      index >= min &&\n      index <= max &&\n      index % squared >= min % squared &&\n      index % squared <= max % squared\n    );\n  }\n  onMouseEnter = (index: number) => {\n    // Step 2\n    const { squared } = this.props;\n    const { start, ondown } = this.state;\n    if (\n      ondown &&\n      zip(divmod(index, squared), divmod(start, squared)).every(\n        ([e, s]) => e! >= s!\n      )\n    ) {\n      this.setState({ end: index });\n    }\n  };\n  onMouseDown = (index: number) => {\n    // Step 1\n    if (this.props.disabled) return;\n    this.setState({ ondown: true, start: index, end: index });\n  };\n  render() {\n    const { squared, disabled } = this.props;\n    const [elem, indices] = this.children();\n    return (\n      <div\n        className={tree({ 'draw-grid-main': { disabled } })}\n        style={{\n          gridTemplateColumns: `repeat(${squared}, 1fr)`,\n          gridTemplateRows: `repeat(${squared}, 1fr)`,\n        }}>\n        {elem}\n        {indices.map(index => (\n          <div\n            key={index + 1}\n            className={tree({\n              'draw-grid-item': { selected: this.isSelected(index) },\n            })}\n            onMouseEnter={() => this.onMouseEnter(index)}\n            onMouseDown={() => this.onMouseDown(index)}\n          />\n        ))}\n      </div>\n    );\n  }\n}\n\nexport function inSquared(\n  idx: number,\n  start: number,\n  end: number,\n  squared: number\n) {\n  const min = Math.min(start, end);\n  const max = Math.max(start, end);\n  return (\n    idx >= min &&\n    idx <= max &&\n    idx % squared >= min % squared &&\n    idx % squared <= max % squared\n  );\n}\n","import { Dispatch, SetStateAction } from 'react';\nimport {\n  NodeArea,\n  NodeFlex,\n  Type,\n  Flow,\n  NodeGrid,\n  NodeMain,\n  replaceNode,\n  Pipe,\n  Node,\n} from '_type/struct';\nimport chunk from 'lodash/chunk';\nimport { DrawGridProps } from '../DrawGrid';\nexport default function useDrawGrid(\n  setMainNode: Dispatch<SetStateAction<NodeMain>>,\n  innerNode: Node[],\n  newId: () => number\n): [boolean, DrawGridProps['onDone']] {\n  const [current, parent] = innerNode;\n  const enabled = parent && current.type === Type.AREA;\n  return [\n    !enabled,\n    (column: number, area: number[]) => {\n      if (\n        enabled &&\n        column &&\n        column <= area.length &&\n        column * area.length > 1 &&\n        area.length % column === 0\n      ) {\n        const [oldNode, newNode] = oldNewNode(\n          // @ts-ignore\n          current,\n          parent,\n          column,\n          area,\n          newId\n        );\n        setMainNode(root => replaceNode(root, oldNode, newNode));\n      }\n    },\n  ];\n}\n\nfunction oldNewNode(\n  current: NodeArea,\n  parent: Node,\n  column: number,\n  area: number[],\n  newId: () => number\n): [Node, Node] {\n  if (column === 1 || column === area.length) {\n    const newNode = newNodeFlex(current, column, area, newId);\n    // Code 1\n    return [current, newNode];\n    // Code 2\n    // if (parent.type !== Type.FLEX || parent.flow !== newNode.flow) {\n    //   return [current, newNode];\n    // }\n    // return [parent, concatNode(newNode, parent)];\n  }\n  return [current, newNodeGrid(current, column, area, newId)];\n}\n\nfunction newNodeFlex(\n  node: NodeArea,\n  column: number,\n  area: number[],\n  newId: () => number\n): NodeFlex {\n  return {\n    ...node,\n    type: Type.FLEX,\n    flow: column === 1 ? Flow.T2B : Flow.L2R,\n    children: area\n      .reduce<number[][]>((a, b) => {\n        if (a.length && a[a.length - 1][0] === b) {\n          a[a.length - 1].push(b);\n        } else {\n          a.push([b]);\n        }\n        return a;\n      }, [])\n      .map(a => a.length)\n      .reduce<Node[]>((a, b, i) => {\n        if (i !== 0) {\n          a.push({\n            id: newId(),\n            type: Type.PIPE,\n            pipe: Pipe['W5H5'],\n          });\n        }\n        a.push({\n          id: newId(),\n          type: Type.AREA,\n          size: 0,\n          grow: b,\n        });\n        return a;\n      }, []),\n  };\n}\n\nfunction concatNode(current: NodeFlex, parent: NodeFlex) {\n  const { grow, size, children } = current;\n  const total = children.reduce((a, b) => {\n    if (b.type === Type.AREA) {\n      return a + b.grow;\n    }\n    return a;\n  }, 0);\n  return {\n    ...parent,\n    id: current.id,\n    children: parent.children.reduce<Node[]>((a, b) => {\n      if (b.id === current.id) {\n        return a.concat(\n          children.map(node => {\n            if (node.type !== Type.AREA) {\n              return node;\n            }\n            return {\n              ...node,\n              size: Math.floor((size * node.grow) / total),\n              grow: grow * node.grow,\n            };\n          })\n        );\n      }\n      // @ts-ignore\n      if (b.grow) {\n        // @ts-ignore\n        return a.concat({ ...b, grow: b.grow * total });\n      }\n      return a.concat(b);\n    }, []),\n  };\n}\n\nfunction newNodeGrid(\n  node: NodeArea,\n  column: number,\n  area: number[],\n  newId: () => number\n): NodeGrid {\n  const chunks = chunk(\n    area.reduce<[number[], number[]]>(\n      ([l1, l2], b) => {\n        const index = l2.findIndex(v => v === b);\n        if (index > -1) {\n          l1.push(index);\n        } else {\n          l1.push(l2.push(b) - 1);\n        }\n        return [l1, l2];\n      },\n      [[], []]\n    )[0],\n    column\n  );\n  return {\n    ...node,\n    type: Type.GRID,\n    column: column * 2,\n    template: Array.from({ length: (column + chunks.length) * 2 }).map(\n      (_, i) => (i + 1) % 2\n    ),\n    area: chunks.reduce<number[]>((a, b) => {\n      const c = b.reduce<number[]>((a, b) => [...a, b, b], []);\n      return [...a, ...c, ...c];\n    }, []),\n\n    children: area\n      .filter((a, i) => a === i)\n      .map(() => ({\n        id: newId(),\n        type: Type.AREA,\n        grow: 0,\n        size: 0,\n      })),\n  };\n}\n","import { Dispatch, SetStateAction } from 'react';\nimport {\n  NodeArea,\n  Node,\n  Flow,\n  NodePipe,\n  Type,\n  Pipe,\n  NodeFlex,\n  NodeMain,\n  replaceNode,\n  deleteNode,\n} from '_type/struct';\nimport { Border } from '.';\n\nexport default function useBorder(\n  setMainNode: Dispatch<SetStateAction<NodeMain>>,\n  focusNode: Node[],\n  innerNode: Node[],\n  newId: () => number\n): [boolean, (border: Border, node: Node | undefined) => void] {\n  const bordered = focusNode[1] && focusNode[1].type !== Type.FLEX;\n  return [\n    !bordered,\n    (border, node) => {\n      if (bordered) {\n        if (node) {\n          return setMainNode(root => deleteNode(root, node.id));\n        }\n        const [oldNode, newNode] = addBorder(border, innerNode as any, newId);\n        setMainNode(root => replaceNode(root, oldNode, newNode));\n      }\n    },\n  ];\n}\n\nfunction addBorder(\n  border: Border,\n  innerNode: [NodeArea, Node],\n  newId: () => number\n): [Node, Node] {\n  const [oldNode, parent] = innerNode as [NodeArea, ...Node[]];\n  const borderFlow = { top: Flow.T2B, bottom: Flow.T2B }[border] || Flow.L2R;\n  const addBorderNode = (children: Node[]) => {\n    const borderNode: NodePipe = {\n      id: newId(),\n      type: Type.PIPE,\n      pipe: Pipe['W5H5'],\n    };\n    if (['top', 'left'].includes(border)) {\n      return [borderNode, ...children];\n    } else {\n      return [...children, borderNode];\n    }\n  };\n  if (parent.type === Type.FLEX && parent.flow === borderFlow) {\n    const newNode: NodeFlex = {\n      ...parent,\n      children: addBorderNode(parent.children),\n    };\n    return [parent, newNode];\n  }\n  const newNode: NodeFlex = {\n    id: newId(),\n    type: Type.FLEX,\n    size: oldNode.size || 0,\n    grow: oldNode.grow || 1,\n    flow: borderFlow,\n    children: addBorderNode([{ ...oldNode, size: 0, grow: 1 }]),\n  };\n  return [oldNode, newNode];\n}\n","/**\n * ```\n * 李鸿章 <poodll@163.com>\n * 9/16/2019, 10:06:59 PM\n * ```\n * doc comment for the file goes here\n */\n\n/** Happy Coding */\nimport React, { Dispatch, SetStateAction } from 'react';\n// import { Link } from 'react-router-dom';\n// import { Icon } from 'antd';\n// import chunk from 'lodash/chunk';\nimport { tree } from '_util';\nimport DrawGrid, { DrawGridProps } from '../DrawGrid';\nimport { Node, NodeMain } from '_type/struct';\nimport useDrawGrid from './useDrawGrid';\nimport borderData from './borderData';\nimport useBorder from './useBorder';\nimport './style.scss';\nexport interface DrawGridBoxProps\n  extends Omit<DrawGridProps, 'disabled' | 'onDone'> {\n  setMainNode: Dispatch<SetStateAction<NodeMain>>;\n  newNodeId(): number;\n  focusNode: Node[];\n  innerNode: Node[];\n}\n\nexport type Border = 'top' | 'right' | 'bottom' | 'left';\nexport const BORDERS: Border[] = ['top', 'right', 'bottom', 'left'];\n\nexport default function DrawGridBox({\n  setMainNode,\n  newNodeId,\n  focusNode,\n  innerNode,\n  ...props\n}: DrawGridBoxProps) {\n  const [disabled, onDone] = useDrawGrid(setMainNode, innerNode, newNodeId);\n  const borderdata = borderData(focusNode, innerNode);\n  const [borderless, onBorderClick] = useBorder(\n    setMainNode,\n    focusNode,\n    innerNode,\n    newNodeId\n  );\n  return (\n    <div\n      className={tree({\n        'draw-grid-box-main': { borderless },\n      })}>\n      {BORDERS.map(border => (\n        <div\n          key={border}\n          className={tree({\n            'draw-grid-box-border': { enabled: !!borderdata[border] },\n          })}\n          style={{ gridArea: border }}\n          onClick={() => onBorderClick(border, borderdata[border])}\n        />\n      ))}\n      <DrawGrid {...props} onDone={onDone} disabled={disabled} />\n    </div>\n  );\n}\n","import { Flow, Type, Node } from '_type/struct';\nimport { Border } from '.';\nexport default function borderData(\n  focusNode: Node[],\n  innerNode: Node[]\n): Partial<Record<Border, Node>> {\n  if (focusNode.length >= innerNode.length) {\n    return {};\n  }\n  const key = (flow: Flow, index: 0 | -1) => {\n    if (flow === Flow.T2B) {\n      return (index && 'bottom') || 'top';\n    }\n    return (index && 'right') || 'left';\n  };\n  return (\n    innerNode\n      .slice(0, 1 - focusNode.length)\n      // .reverse()\n      .reduce((a, b) => {\n        if (b.type === Type.FLEX) {\n          const { flow, children } = b;\n          if (children[0].type === Type.PIPE) {\n            a[key(flow, 0)] = children[0];\n          }\n          if (children.slice(-1)[0].type === Type.PIPE) {\n            a[key(flow, -1)] = children.slice(-1)[0];\n          }\n        }\n        return a;\n      }, {})\n  );\n}\n","import { ReactEventHandler, Dispatch, SetStateAction } from 'react';\nimport {\n  NodeMain,\n  Node,\n  Type,\n  treeNode,\n  NodeTree,\n  duplicate,\n} from '_type/struct';\nexport default function useDuplicate(\n  setMainNode: Dispatch<SetStateAction<NodeMain>>,\n  focusNode: Node[],\n  newId: () => number\n): [boolean, ReactEventHandler] {\n  const [current, parent] = focusNode;\n  const canDuplicate =\n    parent && parent.type === Type.FLEX && current.type !== Type.PIPE;\n  return [\n    !canDuplicate,\n    () => {\n      canDuplicate &&\n        setMainNode(root => duplicateNode(root, current.id, newId));\n    },\n  ];\n}\n\nexport function duplicateNode<T extends NodeTree>(\n  root: T,\n  duplicateId: number,\n  newId: (oldId: number) => number\n): T {\n  return treeNode(root, node => {\n    if (\n      node.type !== Type.FLEX ||\n      node.children.every(({ id }) => id !== duplicateId)\n    ) {\n      return node;\n    }\n    const index = node.children.findIndex(({ id }) => id === duplicateId);\n    const children = node.children.slice();\n    const startIndex = index && index - 1;\n    const dups = children\n      .slice(startIndex, startIndex + 2)\n      .map(node => duplicate(node, newId));\n    children.splice(startIndex, 0, ...dups);\n    return {\n      ...node,\n      children,\n    };\n  });\n}\n","import { ReactEventHandler, Dispatch, SetStateAction } from 'react';\nimport { NodeMain, Node, Type, treeNode, NodeTree } from '_type/struct';\nexport default function useClear(\n  setMainNode: Dispatch<SetStateAction<NodeMain>>,\n  innerNode: Node[] // Before focusNode\n): [boolean, ReactEventHandler] {\n  const [current] = innerNode;\n  const canClear =\n    current && [Type.FLEX, Type.GRID, Type.BONE].includes(current.type);\n  if (canClear && current.type === Type.BONE) {\n    return [\n      !canClear,\n      () => {\n        throw 'Not implemented';\n      },\n    ];\n  }\n  return [\n    !canClear,\n    () => {\n      canClear && setMainNode(root => clearNode(root, current.id));\n    },\n  ];\n}\n\nfunction clearNode<T extends NodeTree>(root: T, clearId: number): T {\n  return treeNode(root, node => {\n    if (node.id !== clearId) {\n      return node;\n    }\n    return {\n      id: node.id,\n      type: Type.AREA,\n      // @ts-ignore\n      size: node.size,\n      // @ts-ignore\n      grow: node.grow,\n      // no children\n    };\n  });\n}\n","/**\n * ```\n * 李鸿章 <poodll@163.com>\n * 9/13/2019, 1:38:53 PM\n * ```\n * doc comment for the file goes here\n */\n\n/** Happy Coding */\nimport React, { Dispatch, SetStateAction } from 'react';\n// import { Link } from 'react-router-dom';\nimport { Button, Icon } from 'antd';\n// import chunk from 'lodash/chunk';\n// import { tree } from '_util';\nimport { Node, Type, NodeMain } from '_type/struct';\nimport useDuplicate from './useDuplicate';\nimport useDelete from './useDelete';\nimport useClear from './useClear';\n\nimport './style.scss';\n\nexport interface DrawMenuProps {\n  setMainNode: Dispatch<SetStateAction<NodeMain>>;\n  newNodeId(): number;\n  focusNode: Node[];\n  innerNode: Node[];\n}\n\nexport default function DrawMenu({\n  setMainNode,\n  focusNode,\n  innerNode,\n  newNodeId,\n}: DrawMenuProps) {\n  /* 左右移·上下翻·去焦·清空·删除·全屏·视角 */\n  const [cantDuplicate, duplicateNode] = useDuplicate(\n    setMainNode,\n    focusNode,\n    newNodeId\n  );\n  const [cantDelete, deleteNode] = useDelete(setMainNode, focusNode);\n  const [cantClear, clearNode] = useClear(setMainNode, innerNode);\n  return (\n    <div className=\"draw-menu-main\">\n      <Button.Group size=\"small\" style={{ display: 'flex' }}>\n        <Button type=\"default\" disabled={cantDuplicate} onClick={duplicateNode}>\n          重复\n        </Button>\n        <Button type=\"default\" disabled={cantClear} onClick={clearNode}>\n          清空\n        </Button>\n        <Button type=\"default\" disabled={cantDelete} onClick={deleteNode}>\n          删除\n        </Button>\n        <Button type=\"default\">全屏</Button>\n        <Button type=\"primary\">视角</Button>\n      </Button.Group>\n    </div>\n  );\n}\n","import { ReactEventHandler, Dispatch, SetStateAction } from 'react';\nimport { NodeMain, Node, Type, deleteNode, NodeArea } from '_type/struct';\nexport default function useDelete(\n  setMainNode: Dispatch<SetStateAction<NodeMain>>,\n  focusNode: Node[]\n): [boolean, ReactEventHandler] {\n  const [current, parent] = focusNode;\n  const canDelete =\n    parent &&\n    parent.type === Type.FLEX &&\n    current.type !== Type.PIPE &&\n    current.type !== Type.BONE &&\n    // @ts-ignore\n    parent.children.filter((n: NodeArea) => n.grow && n.id !== current.id)\n      .length;\n  return [\n    !canDelete,\n    () => {\n      canDelete && setMainNode(root => deleteNode(root, current.id));\n    },\n  ];\n}\n","/**\n * ```\n * 李鸿章 <poodll@163.com>\n * 9/19/2019, 11:17:59 PM\n * ```\n * doc comment for the file goes here\n */\n\n/** Happy Coding */\nimport React, { ReactNode, ReactEventHandler, useState } from 'react';\n// import { Link } from 'react-router-dom';\nimport { InputNumber, Button } from 'antd';\nimport lastIndexOf from 'lodash/lastIndexOf';\nimport indexOf from 'lodash/indexOf';\nimport isEqual from 'lodash/isEqual';\nimport chunk from 'lodash/chunk';\n\n// import { tree } from '_util';\n\nimport './style.scss';\nimport {\n  NodeTree,\n  NodeArea,\n  Flow,\n  NodeGrid,\n  NodeFlex,\n  Type,\n} from '_type/struct';\nimport { divmod } from '_util';\n\nexport interface DrawSizeProps {\n  onSubmit(\n    node: NodeGrid | NodeArea | NodeFlex,\n    data: Pick<NodeGrid, 'template'> | Pick<NodeArea, 'grow' | 'size'>\n  ): void;\n  focusNode: [NodeArea, ...NodeTree[]];\n}\n\nexport default function DrawSize({\n  focusNode: [current, parent],\n  onSubmit,\n}: DrawSizeProps) {\n  const [{ size, grow }, setGrowSize] = useState({\n    size: current.size,\n    grow: current.grow,\n  });\n  const [template, _setTemplate] = useState<number[]>(parent['template'] || []);\n  const setTemplate = (value, index) => {\n    _setTemplate(template.map((v, i) => (i === index ? value : v)));\n  };\n  if (parent.type === Type.FLEX || parent.type === Type.MAIN) {\n    const lables = { [Flow.L2R]: '宽：', [Flow.T2B]: '高：' };\n    return (\n      <React.Fragment>\n        <Item\n          label={lables[parent.flow]}\n          onGrowChange={grow => setGrowSize({ grow, size })}\n          onSizeChange={size => setGrowSize({ grow, size })}\n          base={parent.children.reduce((a, b) => {\n            if (b.id === current.id) {\n              return a;\n            }\n            return a + (b['grow'] || 0);\n          }, grow)}\n          size={size}\n          grow={grow}\n        />\n        <div className=\"draw-size-item\">\n          <div>　　</div>\n          <Button\n            onClick={() => {\n              onSubmit(current, { grow, size });\n            }}\n            size=\"small\"\n            type=\"primary\"\n            disabled={\n              size < 0 ||\n              grow < 0 ||\n              size + grow <= 0 ||\n              (size === current.size && grow === current.grow)\n            }>\n            确定\n          </Button>\n        </div>\n      </React.Fragment>\n    );\n  }\n  const { column, area, children } = parent;\n  const index = children.findIndex(({ id }) => id === current.id);\n  const [rs, cs] = divmod(indexOf(area, index), column);\n  const [re, ce] = divmod(lastIndexOf(area, index), column, 1);\n  const temp = template.map((value, index) => [value, index]);\n  const colBase = template\n    .slice(0, column)\n    .map((v, i) => (i + 1) % 2 && v)\n    .reduce((a, b) => a + b, 0);\n  const rowBase = template\n    .slice(column)\n    .map((v, i) => (i + 1) % 2 && v)\n    .reduce((a, b) => a + b, 0);\n  return (\n    <React.Fragment>\n      {chunk(temp.slice(cs, ce), 2).map(\n        ([[grow, growIndex], [size, sizeIndex]]) =>\n          size < 0 ? null : (\n            <Item\n              key={growIndex}\n              onGrowChange={grow => setTemplate(grow, growIndex)}\n              onSizeChange={size => setTemplate(size, sizeIndex)}\n              label=\"宽：\"\n              base={colBase}\n              size={size}\n              grow={grow}\n            />\n          )\n      )}\n      {chunk(temp.slice(column + rs, column + re), 2).map(\n        ([[grow, growIndex], [size, sizeIndex]]) =>\n          size < 0 ? null : (\n            <Item\n              key={growIndex}\n              onGrowChange={grow => setTemplate(grow, growIndex)}\n              onSizeChange={size => setTemplate(size, sizeIndex)}\n              label=\"高：\"\n              base={rowBase}\n              size={size}\n              grow={grow}\n            />\n          )\n      )}\n      <div className=\"draw-size-item\">\n        <div>　　</div>\n        <Button\n          onClick={() => {\n            onSubmit(parent, { template });\n          }}\n          size=\"small\"\n          type=\"primary\"\n          disabled={isEqual(parent.template, template)}>\n          确定\n        </Button>\n      </div>\n    </React.Fragment>\n  );\n}\n\nfunction Item({ label, size, grow, base, onSizeChange, onGrowChange }) {\n  const basement = `${base || 1}`;\n  return (\n    <div className=\"draw-size-item\">\n      <div>{label}</div>\n      <InputNumber\n        value={grow}\n        size=\"small\"\n        disabled={base <= grow}\n        onChange={value => {\n          onGrowChange(value || 0);\n        }}\n      />\n      <div title={basement}>&nbsp;/&nbsp;{basement}&nbsp;+&nbsp;</div>\n      <InputNumber\n        size=\"small\"\n        value={size}\n        onChange={value => {\n          onSizeChange(value || 0);\n        }}\n      />\n      <div>&nbsp;mm</div>\n    </div>\n  );\n}\n","import {\n  useState,\n  useRef,\n  MutableRefObject,\n  Dispatch,\n  SetStateAction,\n  useMemo,\n} from 'react';\nimport {\n  NodeMain,\n  Node,\n  NodeFlex,\n  Flow,\n  Pipe,\n  replaceNode,\n  duplicate,\n  NodeGrid,\n  NodeArea,\n  calcNodeSizing,\n  Type,\n} from '_type/struct';\nimport { DrawProps } from '.';\nexport interface UseMnode {\n  resizeNode(\n    node: NodeArea | NodeFlex | NodeGrid,\n    data: Pick<NodeGrid, 'template'> | Pick<NodeArea, 'grow' | 'size'>\n  ): void;\n  setMainNode: Dispatch<SetStateAction<NodeMain>>;\n  newNodeId(): number;\n  setMainNodeData: any;\n  mainNode: NodeMain;\n  nodeSizing: ReturnType<typeof calcNodeSizing>;\n}\nexport default function useMnode(props: DrawProps): UseMnode {\n  const newId = useRef(Date.now());\n  const [mainNode, setMainNode] = useState<NodeMain>(initMnode(props, newId));\n  const nodeSizing = useMemo(() => calcNodeSizing(mainNode), [mainNode]);\n  const newNodeId = () => newId.current--;\n\n  const setMainNodeData = ({ position, ...data }) => {\n    const { children } = mainNode;\n    const pos = children.map(({ type }) => Number(type === Type.PIPE)).join('');\n    if (pos === position) {\n      setMainNode({ ...mainNode, ...data });\n    } else {\n      setMainNode({\n        ...mainNode,\n        ...data,\n        children: openChildren(children, pos, position, newId),\n      });\n    }\n  };\n  const resizeNode: UseMnode['resizeNode'] = (node, data) => {\n    const newNode = { ...node, ...data };\n    setMainNode(replaceNode(mainNode, node, newNode));\n  };\n  return {\n    setMainNodeData,\n    setMainNode,\n    nodeSizing,\n    resizeNode,\n    newNodeId,\n    mainNode,\n  };\n}\n\nfunction openChildren(\n  children: Node[],\n  oldPosition: string,\n  newPosition: string,\n  newId: MutableRefObject<number>\n): Node[] {\n  if (oldPosition === newPosition) {\n    return children;\n  }\n  const data = {\n    '0': children.find(({ type }) => type !== Type.LOCK),\n    '1': children.find(({ type }) => type === Type.LOCK),\n  };\n\n  return newPosition.split('').map((n, i) => {\n    const node = data[n] || {\n      id: newId.current--,\n      type: Type.LOCK,\n    };\n    if (newPosition.slice(0, i).includes(n)) {\n      return duplicate(node, () => newId.current--);\n    }\n    return node;\n  });\n}\n\nfunction initMnode(\n  { position, ...props }: DrawProps,\n  newId: MutableRefObject<number>\n): NodeMain {\n  return {\n    ...props,\n    version: 1,\n    id: newId.current--,\n    type: Type.MAIN,\n    children: openChildren(\n      [\n        { id: newId.current--, type: Type.LOCK },\n        {\n          id: newId.current--,\n          type: Type.FLEX,\n          flow: Flow.L2R,\n          size: 0,\n          grow: 1,\n          children: [\n            { id: newId.current--, type: Type.PIPE, pipe: Pipe.W5H5 },\n            {\n              id: newId.current--,\n              type: Type.FLEX,\n              flow: Flow.T2B,\n              size: 0,\n              grow: 1,\n              children: [\n                { id: newId.current--, type: Type.PIPE, pipe: Pipe.W5H5 },\n                {\n                  id: newId.current--,\n                  type: Type.AREA,\n                  size: 0,\n                  grow: 1,\n                },\n                { id: newId.current--, type: Type.PIPE, pipe: Pipe.W5H5 },\n              ],\n            },\n            { id: newId.current--, type: Type.PIPE, pipe: Pipe.W5H5 },\n          ],\n        },\n      ],\n      '10',\n      position,\n      newId\n    ),\n  };\n}\n","import { useState, useEffect, RefObject, useRef } from 'react';\nimport { NodeMain } from '_type/struct';\n\nexport default function(main: NodeMain, canvas: RefObject<HTMLDivElement>) {\n  const wh = useRef({ width: main.width, height: main.height });\n  const [scale, setScale] = useState(0.618);\n  const [minScale, _setMinScale] = useState(0);\n  const [maxScale, _setMaxScale] = useState(1);\n  const [offset, setOffset] = useState<[number, number]>([0, 0]);\n  const scaleOffset = ({ offsetHeight, offsetWidth }: HTMLDivElement) => {\n    const hmin = (offsetHeight / wh.current.height) * 96;\n    const wmin = (offsetWidth / wh.current.width) * 96;\n    const minScale = Math.ceil(Math.min(hmin, wmin));\n    const maxScale = Math.floor(Math.max(hmin, wmin));\n    _setMinScale(minScale);\n    _setMaxScale(maxScale);\n    setScale(minScale);\n    setOffset([\n      (offsetWidth - wh.current.width) / 2,\n      // (offsetHeight - wh.current.height) / 2,\n      0,\n    ]);\n    return [minScale, maxScale];\n  };\n  const _setScale = (minaxScale: number) => {\n    if (canvas.current) {\n      setScale(minaxScale);\n      canvas.current.scrollTo({\n        top: (wh.current.height - canvas.current.offsetHeight) / 2,\n      });\n    }\n  };\n  const onResize = () => {\n    if (!canvas.current) return;\n    const elem = canvas.current;\n    const [minScale, maxScale] = scaleOffset(elem);\n    _setMinScale(minScale);\n    _setMaxScale(maxScale);\n    setScale(scale => {\n      if (scale < minScale) {\n        elem.scrollTo({\n          top: (wh.current.height - elem.offsetHeight) / 2,\n        });\n        return minScale;\n      } else if (scale > maxScale) {\n        elem.scrollTo({\n          top: 0,\n        });\n        return maxScale;\n      } else {\n        return scale;\n      }\n    });\n  };\n  useEffect(() => {\n    const { width, height } = main;\n    if (wh.current.width !== width || wh.current.height !== height) {\n      wh.current.height = height;\n      wh.current.width = width;\n      onResize();\n    }\n  }, [main]);\n  useEffect(() => {\n    if (!canvas.current) return;\n    const elem = canvas.current;\n    const [minScale] = scaleOffset(elem);\n    _setScale(minScale);\n    // @ts-ignore\n    if (ResizeObserver) {\n      // @ts-ignore\n      const observer = new ResizeObserver(onResize);\n      observer.observe(elem);\n      return () => observer.unobserve(elem);\n    } else {\n      window.addEventListener('resize', onResize);\n      return () => window.removeEventListener('resize', onResize);\n    }\n  }, [canvas.current]);\n  return {\n    offset,\n    minScale,\n    maxScale,\n    scale,\n    setScale,\n    setMinScale() {\n      _setScale(minScale);\n    },\n    setMaxScale() {\n      _setScale(maxScale);\n    },\n  };\n}\n","import { useState, useEffect } from 'react';\nimport {\n  NodeMain,\n  Node,\n  Type,\n  findNode,\n  containNode,\n  frameNode,\n  NodeTree,\n} from '_type/struct';\n\nexport default function useFocus(mainNode: NodeMain) {\n  const [{ focusNode, innerNode }, _setNode] = useState<{\n    focusNode: Node[];\n    innerNode: Node[];\n  }>({ focusNode: [], innerNode: [] });\n  const _setFocusNode = (node: Node | null, focusNode: Node[]) => {\n    if (!node) {\n      return { focusNode: [], innerNode: [] };\n    }\n    if (node.type === Type.PIPE) {\n      const nodes = findNode(mainNode, node.id);\n      return { focusNode: nodes, innerNode: nodes };\n    }\n    const [target, ...uplist] = findNode(\n      mainNode,\n      focusNode.length && focusNode[0].id\n    );\n    if (uplist.length > 1 && containNode(target, node.id)) {\n      return { focusNode: frameNode(uplist), innerNode: uplist };\n    } else {\n      const nodes = findNode(mainNode, node.id);\n      return {\n        focusNode: frameNode(nodes as NodeTree[]),\n        innerNode: nodes,\n      };\n    }\n  };\n  const setFocusNode = (node: Node | null) => {\n    _setNode(_setFocusNode(node, focusNode));\n  };\n  useEffect(() => {\n    _setNode(({ focusNode, innerNode }) => {\n      if (innerNode.length) {\n        return _setFocusNode(innerNode[0], []);\n      }\n      return { focusNode, innerNode };\n    });\n  }, [mainNode]);\n  return { focusNode, setFocusNode, innerNode };\n}\n","/**\n * ```\n * 李鸿章 <poodll@163.com>\n * 9/5/2019, 7:41:10 PM\n * ```\n * doc comment for the file goes here\n */\n\n/** Happy Coding */\nimport React, { useState, useRef, useContext, useEffect } from 'react';\n\nimport { Collapse } from 'antd';\nimport withPath from '_base/withPath';\nimport { context } from '_base/Context';\nimport lastIndexOf from 'lodash/lastIndexOf';\nimport indexOf from 'lodash/indexOf';\nimport { divmod } from '_util';\nimport DrawBase from '_view/DrawBase';\nimport DrawScale from '_view/DrawScale';\nimport DrawNode from '_view/DrawNode';\nimport DrawGrid from '_view/DrawGridBox';\nimport DrawMenu from '_view/DrawMenu';\nimport DrawSize from '_view/DrawSize';\nimport { Flow, Type, Node, NodeArea, NodeFlex } from '_type/struct';\nimport useMnode from './useMnode';\nimport useScale from './useScale';\nimport useFocus from './useFocus';\nimport { getData } from './fetch';\nimport './style.scss';\n\nexport default withPath('/x000/draw', {}, {})(\n  ({ history, match: { params } }) => {\n    const { username } = useContext(context);\n    // Code 1\n    const [data, setData] = useState<Omit<DrawProps, 'author'> | null>(null);\n    // Code 2\n    // const [data, setData] = useState<Omit<DrawProps, 'author'> | null>({\n    //   width: 1800,\n    //   height: 2400,\n    //   title: 'Windoors',\n    //   flow: Flow.L2R,\n    //   position: '01',\n    // });\n    if (data) {\n      return <Draw author={username} {...data} />;\n    }\n    return (\n      <div className=\"draw-init\">\n        <DrawBase onSubmit={data => setData(data)} />\n      </div>\n    );\n  }\n);\n\nexport interface DrawProps {\n  width: number;\n  height: number;\n  title: string;\n  author: string;\n  flow: Flow;\n  position: string;\n}\nfunction Draw(props: DrawProps) {\n  const canvas = useRef<HTMLDivElement>(null);\n  const {\n    setMainNodeData,\n    setMainNode,\n    resizeNode,\n    nodeSizing,\n    newNodeId,\n    mainNode,\n  } = useMnode(props);\n  useEffect(() => {\n    console.log(mainNode);\n  }, [mainNode]);\n  const { focusNode, innerNode, setFocusNode } = useFocus(mainNode);\n  const {\n    setMinScale,\n    setMaxScale,\n    setScale,\n    minScale,\n    maxScale,\n    offset,\n    scale,\n  } = useScale(mainNode, canvas);\n  const focusKey = focusNode.length && focusNode[0].id;\n  const innerKey = innerNode.length && innerNode[0].id;\n  return (\n    <div className=\"draw-main\">\n      <div className=\"draw-canvas\" ref={canvas} tabIndex={0}>\n        <DrawNode\n          onClick={setFocusNode}\n          focusId={innerKey}\n          offset={offset}\n          scale={scale}\n          mainNode={mainNode}\n        />\n      </div>\n      <div className=\"draw-object\">\n        <DrawScale\n          setMinScale={setMinScale}\n          setMaxScale={setMaxScale}\n          setScale={setScale}\n          minScale={minScale}\n          maxScale={maxScale}\n          scale={scale}\n        />\n        <DrawMenu\n          setMainNode={setMainNode}\n          focusNode={focusNode}\n          innerNode={innerNode}\n          newNodeId={newNodeId}\n        />\n        <DrawGrid\n          key={innerKey}\n          setMainNode={setMainNode}\n          focusNode={focusNode}\n          innerNode={innerNode}\n          newNodeId={newNodeId}\n          squared={9}\n        />\n        <Collapse defaultActiveKey={['2', '3', '4']}>\n          <Collapse.Panel header=\"框体设置\" key=\"1\">\n            <DrawBase\n              {...mainNode}\n              size=\"small\"\n              key={focusKey}\n              onSubmit={data => setMainNodeData(data)}\n              position={mainNode.children\n                .map(({ type }) => Number(type === Type.LOCK))\n                .join('')}\n            />\n          </Collapse.Panel>\n          {focusNode[1] &&\n            [Type.AREA, Type.FLEX, Type.GRID].includes(focusNode[0].type) && (\n              <Collapse.Panel header=\"尺寸设置\" key=\"2\">\n                <DrawSize\n                  key={focusKey}\n                  focusNode={focusNode as any}\n                  onSubmit={(node, data) => {\n                    resizeNode(node, data);\n                  }}\n                />\n              </Collapse.Panel>\n            )}\n          {canBone(focusNode) && (\n            <Collapse.Panel header=\"花纹选择\" key=\"3\">\n              花纹选择\n            </Collapse.Panel>\n          )}\n          {innerNode.length > 0 && nodeSizing[innerKey] && (\n            <Collapse.Panel header=\"尺寸信息\" key=\"4\">\n              宽：{nodeSizing[innerKey].width}\n              <br />\n              高：{nodeSizing[innerKey].height}\n            </Collapse.Panel>\n          )}\n\n          <Collapse.Panel header=\"出料清单\" key=\"5\">\n            出料清单\n          </Collapse.Panel>\n        </Collapse>\n        {/* 保存·打印 */}\n      </div>\n    </div>\n  );\n}\n\nfunction canBone([current, parent, grand]: Node[]): boolean {\n  if (!parent || current.type !== Type.AREA) {\n    return false;\n  }\n  if (parent.type === Type.FLEX) {\n    const isFlexible = (parent: NodeFlex, current: Node) =>\n      parent.children.filter(\n        // @ts-ignore\n        (node: NodeArea) => node.grow && node.id !== current.id\n      ).length > 0;\n    return (\n      grand &&\n      grand.type === Type.FLEX &&\n      isFlexible(parent, current) &&\n      isFlexible(grand, parent)\n    );\n  }\n  if (parent.type === Type.GRID) {\n    const { column, area, children, template } = parent;\n    const index = children.findIndex(({ id }) => id === current.id);\n    const [rs, cs] = divmod(indexOf(area, index), column);\n    const [re, ce] = divmod(lastIndexOf(area, index), column, 1);\n    if (re - rs !== 2 || ce - cs !== 2) {\n      return false;\n    }\n    const colBase =\n      template\n        .slice(0, column)\n        .map((v, i) => (i + 1) % 2 && v)\n        .reduce((a, b) => a + b, 0) - template[cs];\n    const rowBase =\n      template\n        .slice(column)\n        .map((v, i) => (i + 1) % 2 && v)\n        .reduce((a, b) => a + b, 0) - template[column + rs];\n    return colBase > 0 && rowBase > 0;\n  }\n  return false;\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport * as serviceWorker from './serviceWorker';\n\nimport { ConfigProvider } from 'antd';\nimport zh_CN from 'antd/es/locale/zh_CN';\nimport 'moment/locale/zh-cn';\n\nimport './_sass/reset.scss';\n// #########################\nimport Context, { ContextState, Userflag } from '_base/Context';\nimport Init from './x000/Init';\nimport Sign from './x000/Sign';\nimport Head from './x000/Head';\nimport Draw from './x000/Draw';\n// #########################\nimport {\n  BrowserRouter as Router,\n  Switch,\n  Route,\n  Redirect,\n} from 'react-router-dom';\nimport { Layout } from 'antd';\n// #########################\n\nimport './_sass/cover.scss';\n\nReactDOM.render(\n  <ConfigProvider locale={zh_CN}>\n    <Context>{renderRouter}</Context>\n  </ConfigProvider>,\n  document.getElementById('root')\n);\n\nfunction renderRouter({ userflag, userName, popupView }: ContextState) {\n  switch (userflag) {\n    case Userflag.LOADING:\n      return <Init />;\n    case Userflag.UNKNOWN:\n      return <Sign />;\n    default:\n      return (\n        <Router basename=\"/public/windoors\">\n          <Layout style={{ height: '100%' }}>\n            <Route component={Head} />\n            <Layout>\n              <Layout.Sider\n                width={200}\n                theme=\"light\"\n                style={{ backgroundColor: 'white' }}>\n                Menu\n              </Layout.Sider>\n              <Layout style={{ padding: '8px' }}>\n                <Switch>\n                  <Route path={Draw.path} component={Draw} />\n                  <Redirect exact from=\"/\" to=\"/x000/draw\" />\n                </Switch>\n              </Layout>\n            </Layout>\n          </Layout>\n        </Router>\n      );\n  }\n}\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}